# Towards Fully Automatic X-Ray to CT Registration

## 0. Abstract

The main challenge preventing a fully-automatic X-ray to CT registration is an initialization scheme that brings the X-ray pose within the capture range of existing intensity-based registration methods. By providing such an automatic initialization, the present study introduces the first end-to-end fully-automatic registration framework. A network is first trained once on artificial X-rays to extract 2D landmarks resulting from the projection of CT-labels. A patient-specific refinement scheme is then carried out: candidate points detected from a new set of artificial X-rays are back-projected onto the patient CT and merged into a refined meaningful set of landmarks used for network re-training. This network-landmarks combination is finally exploited for intraoperative pose-initialization with a runtime of 102ms. Evaluated on 6 pelvis anatomies (486 images in total), the mean Target Registration Error was 15.0 ± 7.3 mm. When used to initialize the BOBYQA optimizer with normalized cross-correlation, the average (± STD) projection distance was 3.4 ± 2.3 mm, and the registration success rate (projection distance < 2.5% of the detector width) greater than 97%.

阻碍X射线到CT全自动配准的主要挑战，是一个初始化方案，将X射线图像的姿态带到现有的基于灰度的配准方法的捕获范围内。本文给出了这样一种自动的初始化，提出了第一种端到端全自动的配准框架。网络首先在人工合成的X射线图像上训练一次，提取CT标记的投影得到的2D标记点。然后进行对特定病人的优化方案：从一个新的人工合成的X射线图像集上检测到的候选点，然后反向投影到患者CT中，合并成为一个优化的有意义的标记点集，用于网络的重新训练。这个网络与标记点的组合最终用于术中姿态初始化，运行时间102ms。在6个盆部解剖结构（共486幅图像）进行的评估，平均TRE为15.0 ± 7.3 mm。当用于初始化BOBYQA优化器时，使用的是归一化互相关度量，平均(± STD)投影距离为3.4 ± 2.3 mm，配准成功率（投影距离< 探测器宽度的2.5%）大于97%。 

Keywords: X-ray to CT Registration · Projective geometry · Neural network · Patient-specific training

## 1. Introduction

Registration deals with the problem of finding the optimal transformation from one coordinate space to another. Within a medical context, registration plays a crucial role to match preoperative and intraoperative data. Preoperative images, such as CT scans, are usually captured days before the actual surgery to execute surgical planning, while intraoperative images, such as X-ray, are used for live navigation and monitoring. Without registration, surgeons must rely on their experience to perform a mental mapping between pre- and intraoperative images. Therefore, automatic registration is important to facilitate the surgical workflow, reduce the mental load, and potentially improve the clinical outcome.

配准处理的是找到从一个坐标系到另一个的最优变换的问题。在医学应用中，配准在将术前数据与术中数据匹配中，起到了关键作用。术前数据，比如CT，通常是在实际手术前几天拍摄的，用于进行手术计划，而术中图像，如X射线图像，用于现场导航和监控。没有配准的话，外科医生必须靠其经验来将术前图像与术中图像进行脑力映射。因此，自动配准是非常重要的，可以促进手术流程，减少脑力劳动，可能改进临床的结果。

Effective initialization is usually considered as the Achilles’ heel of most registration approaches. Considering two images {I1,I2} and a given registration method R, if I1 and I2 originally have a substantially different pose (namely, a great discrepancy in their relative rotation and translation within six degrees of freedom, 6DoF), the subsequent operation of spatial alignment R(I1,I2) is likely to fail. For this reason, the notion of capture range is used to describe the maximum initial displacement from which R is able to provide an accurate result [5]. Initialization can then be defined as estimating a transformation matrix T = [r|t] (i.e. rotation, translation) such that T(I1) falls in the capture range of R, thus enabling the end-to-end operation R(T(I1),I2) to provide a correct spatial alignment between I1 and I2. Although marker-based registration approaches (i.e. relying on a set of external fiducial targets) are known for their relative agnosticism to initialization due to their higher built-in robustness, this family of methods suffers from other drawbacks: bone-implanted markers require an additional invasive surgical procedure, whereas skin-attached markers are prone to deformation and yield a lower accuracy [5]. For purely image-based registration methods—such as intensity-based or feature-based approaches—to perform accurately, providing a correct initialization is indeed crucial.

高效的初始化通常认为是多数配准方法的弱点。考虑两幅图像{I1,I2}，和一个给定的配准方法R，如果I1和I2开始的姿态就非常不同（即，其6DoF的相对旋转和平移有很大），那么后续的空间对齐R(I1,I2)操作很可能会失败。因为这个原因，捕获范围的概念用于描述，R能够给出准确结果的最大初始位移。这样，初始化就可以定义为，估计一个变形矩阵T=[r|t]（即，旋转，平移），使得T(I1)落入R的捕获范围内，这样使得R(T(I1),I2)的端到端的操作可以给出I1和I2的正确的空间对齐。虽然基于标记点的配准方法（即，依靠外部fiducial目标集）非常有名，对初始化相对没有依赖性，因为其内在的稳健性，但这一族方法有其他缺点：植入的骨标记需要额外的侵入性外科手术，而贴在皮肤上的标记容易变形，因此会得到较低的准确率。对于纯基于图像的配准方法，如基于灰度的，或基于特征的方法，要得到很准确的结果，给出一个正确的初始化是非常关键的。

Although registration methodologies are now well established, the challenge of providing a robust initialization towards enabling registration convergence remains an open problem. An approach based on the projection-slice theorem and phase correlation was put forward [2]. Despite the fact that good results were achieved, the authors report severe limitations: running time not suited for intraoperative use, and geometric discrepancy between the theoretical parallel-beam and the actual cone-beam. A regression technique was designed to deal with arbitrary motion and to predict slice transformations relative to a learned canonical atlas coordinate system [3]. The applicability of that scheme is however constrained by the relatively poor resulting accuracy. A different strategy relying on a specific initialization framework via several coarse segmentations was proposed [6]. A potential drawback of this method is that the initialization step is based upon a third-party segmentation scheme that shall be provided by the user. An original approach was recently introduced to automatically detect anatomical landmarks in 2D X-ray images, thus enabling to determine the transformation T with respect to the corresponding 3D CT volume [1]. Nevertheless, this method is hindered by two limitations: (1) the original 3D CT landmarks must be manually annotated for each new patient, which is a tedious and analyst-dependant task, and (2) the landmark model is pre-generated from a set of patients and may therefore not fully capture patient-specific anatomical details when applied intraoperatively.

虽然配准方法现在都已经很固定的，但给出一个稳健的初始化，以使得配准过程收敛，还是一个开放的问题。[2]提出了一种基于投影-切片定理和相位相关的方法。虽然得到了很好的效果，作者也提出了几个严重的限制：运行时间不适用于术中使用，在理论上的平行束和实际的锥形束之间存在几何偏差。[3]设计了一种回归方法，处理任意的运动，并预测切片相对于学习到的经典的atlas的变形。那个方案所得到的准确率较差，所以应用不多。[6]提出了一种根据几个粗糙的分割结果，依赖于特定初始化方案的不同策略。这种方法的一个潜在缺陷是，初始化步骤是基于第三方分割结果的，用户要提供这个结果。最近提出了一种原创性方法[1]，自动检测2D X射线图像中解剖特征点，因此可以对对应的3D CT体确定这个变换T。尽管如此，这种方法有两个缺陷：(1)原始的3D CT特征点必须对每个新患者进行手动标注，这是一个繁琐的依赖于具体人的任务；(2)特征点模型是从一个患者集合中预生成的，因此在术中应用时，不会完全捕获与患者特定的解剖细节。

The aim of the present work is to propose a method to estimate the initial rigid transformation T between a preoperative 3D CT volume and intraoperative 2D X-ray images. The main contribution is a patient-specific landmark-refinement scheme based on deep learning and projective geometry. Addressing the limitations mentioned above, the framework is fully automatic, falls in the capture range of standard registration methods, and its runtime is compatible with intraoperative applications. The proposed method is fully integrated into an end-to-end registration scheme, where the provided initial pose can be directly and automatically exploited by standard registration techniques. Validation is performed on pelvis anatomy in the context of trauma surgery.

本文的目标是，提出一种方法，估计术前3D CT体和术中的2D X射线图像之间的，初始的刚性变换T。主要的贡献是，一个与患者相关的特征点优化方案，基于深度学习和投影几何。解决了上面提到的限制，这个框架是完全自动的，落入了标准配准方法的捕获范围内，其运行时间是符合术中应用的标准的。提出的方法完全整合到了一个端到端的配准方案中，其中提出的初始姿态可以直接自动的由标准配准技术应用。在盆部的外伤手术的应用中进行了验证。

## 2. Methods

A schematic representation of the proposed method is shown in Fig.1. The framework consists of three main phases, as described hereafter.

提出的方法如图1所示。框架包含三个主要步骤，下面进行阐述。

**Phase 1—Network Pre-training**: This phase is run only once and for all. Here, a convolutional neural network N is trained to detect a set of Ω = 23 anatomical landmarks M = [m1,m2,...,mΩ] on X-ray images, similar to a method introduced by another group [1]. The training data for N consists of synthetically generated X-ray images from a collection of manually annotated CT volumes from 13 patients from the NIH Cancer Imaging Archive [7] (referred to as the “pre-training set”). Twelve patients were used for training and one for validation. Landmark locations were chosen such that they correspond to clinically meaningful and clearly identifiable points [1]. X-rays were generated with a commercially available Digitally Reconstructed Radiograph (DRR) generator. For each CT, a total of 3,456 X-rays were generated, covering a wide range of poses (Translation: ±15 mm along {x, y, z} (where x is medial/lateral, y is anterior/posterior, z is cranial/caudal); Rotation: ±35◦ around x, ±15◦ around y, and ±45◦ around z). Values were sampled evenly along those dimensions, with 6 rotation samples around z, 3 rotation samples around x and y, and 4 translation samples along x, y, and z. Ground truth landmarks for the training were obtained by projecting the points mω from CT to X-ray, knowing the DRR pose. The network N corresponds to a previously introduced architecture [9]. Training was carried out with the Adam optimizer for 4 epochs until convergence was reached, with a learning rate of 0.00001 and a batch size of 1 [1].

**第一阶段-网络预训练**：这个阶段只运行一次。这里，训练一个CNN，在X射线图像上检测Ω = 23个解剖特征点M = [m1,m2,...,mΩ]，与[1]中的方法类似。N的训练数据是NIH癌症影像库中的13个患者的手工标注CT体所合成生成的X射线图像，称为预训练集。12个患者用于训练，1个用于验证。特征点位置的选择，要求要对应着临床上有意义的并可明显鉴别到的点。X射线图像是用商用DRR生成器生成的。对于每个CT，共计生成了3456幅X射线图像，覆盖了大量姿态（平移：沿着x,y,z方向±15 mm，其中x是身体的内侧、外侧方向，y是身体的上下方向，z是头脚方向；旋转：沿x轴±35◦，沿y轴±15◦，沿z轴±45◦）。在这些维度上值是均匀采样的，z方向有6个旋转角度，x和y方向的旋转有3个角度，x,y,z方向各有4个平移的样本。用于训练的真值标记点，是通过将CT中的点mω投影到X射线图像上获得的，已知DRR的姿态。网络N对应一个之前提出的架构[9]。训练是用Adam优化器进行了4轮，直到收敛，学习速率0.00001，批大小为1[1]。

**Phase 2—Automatic Patient-Specific Landmarks Extraction**: This phase is the main contribution of the present work. A patient-specific CT volume, referred to as CTpat, is processed in three steps, as described below.

**第二阶段-特定病人的特征点自动提取**：这个阶段是本文的主要贡献。具体患者的CT，称为CTpat，分三个步骤进行处理，如下所述。

**Phase 2.a—Ray Back-Projection**: X-ray images are synthetically generated from CTpat using the DRR generator, covering K = 90 poses (Translation: ±15mm along z; Rotation: ±15◦ around x, ±40◦ around z). Equidistantly-spaced samples were chosen: 10 rotation samples around z, 3 rotation samples around x, and 3 translation samples along z. The network N is then applied to detect the rough locations of the landmarks M. The known geometry of all the generated X-ray images is exploited to back-project each point mω onto a series of rays $r_ω^k$, with k = [1,2,...,K] (Fig.2). Each ray $r_ω^k$ passes through the detected location of mω in the image and the camera center of the projection.

**阶段2.a-射线反向投影**：X射线图像是从CTpat中使用DRR生成器合成生成的，覆盖了K=90个姿态（平移：在z轴中±15mm；旋转：沿x轴±15◦，沿z轴±40◦）。选择了等距采样：沿z方向10个旋转角度，沿着x方向3个旋转角度，沿z轴3个平移采样。网络N然后用于检测特征点M的大致位置。所有生成的X射线图像的几何都是已知的，利用这一点将每个点mω反向投影到一系列射线$r_ω^k$上，k = [1,2,...,K]（图2）。每条射线$r_ω^k$穿过图像上mω的检测位置，和投影的相机中心。

**Phase 2.b—Landmark Refinement**: Due to the prediction inaccuracy inherent to the network N, the set of 3D rays $r_ω^k$ resulting from a given landmark mω do not perfectly intersect on the same point (Fig. 2). To cope with this lack of precision, a set of refined landmarks $M' = [m'_1,m'_2,...,m'_Ω]$ is generated, respecting the two following criteria: each new landmark $m'_ω$ shall (1) stay as close as possible to the barycenter of the intersection of all the rays $r_ω^k$, and (2) be located on the bone surface. The rationale of this refinement operation is to ensure that the final landmarks $m'_ω$ describe meaningful local anatomical regions, thus facilitating learning and registration. This approach is independently conducted for all landmarks, and is described hereafter for a single landmark $m'_ω$.

**阶段2.b-特征点优化**：由于网络N的预测肯定是不精确的，从给定的特征点mω得到的3D射线$r_ω^k$的集合不会完美的在同样的点相交（图2）。为处理这个精度缺失的问题，要根据下列两条准则，生成精炼特征点集$M' = [m'_1,m'_2,...,m'_Ω]$：每个新的特征点$m'_ω$应当(1)与所有射线$r_ω^k$的交点的中心尽可能的近，(2)应当在骨的表面。这种提炼操作的原理是，确保最终的特征点$m'_ω$描述的是有意义的局部解剖区域。这个方法是对所有特征点都独立进行的，后面对于单个特征点$m'_ω$进行描述。

First, the point $p^{rays}_ω$, corresponding to the rough barycenter of the intersection of all rays $r^k_ω$, is determined (Fig. 2a–b). For two given rays {$r^{k1}_ω, r^{k2}_ω$}, the closest equidistant point $p^{k1,k2}_ω$ is calculated. A constant threshold τ = 6 mm is used to discard candidate points when two rays are too far apart. The coordinates of $p^{rays}_ω$ are defined as the median x, y, and z coordinates of all valid $p^{k1,k2}_ω$ points.

首先，确定与所有射线$r^k_ω$的交点的大致重心对应的点$p^{rays}_ω$（图2a-b）。对于两条给定的射线{$r^{k1}_ω, r^{k2}_ω$}，计算最近的等距离点$p^{k1,k2}_ω$。当两条射线差的太远时，使用常数阈值τ = 6 mm来抛弃候选点。$p^{rays}_ω$的坐标定义为所有有效的$p^{k1,k2}_ω$点的中值x, y和z坐标。

Then, the point $m'_ω$ corresponding to the projection of $p^{rays}_ω$ onto the bone surface is determined (Fig.2b). The volume CTpat is first thresholded (Hounsfield units in [200,500] are mapped to one—bone, all other values are mapped to zero—background). A contour detection scheme is then applied to the thresholded image [8]. The point $m'_ω$ is finally determined via a sphere-growing scheme centered on $p^{rays}_ω$ to find the closest point on the bone surface.

然后，对应投影$p^{rays}_ω$到骨表面的点$m'_ω$要确定下来（图2b）。体CTpat首先用阈值进行处理（HU在[200,500]范围内映射到1-骨头，其他值映射到0-背景）。然后对阈值处理后的图像使用边缘检测的方案[8]。点$m'_ω$最终是通过一个球形增长方案来确定，其中心点在$p^{rays}_ω$，以找到在骨表面的最近点。

**Phase 2.c—Patient-Specific Re-training**: Since the landmark sets M and M' do not necessarily describe the same real-world points, network re-training is necessary. The network N' is therefore generated to detect the refined landmarks M'. The weights of N' are initialized with the weights of N. To enable patient-specific re-training, the synthetic DRR X-rays are only generated from CTpat (as opposed to from the collection of 13 patients used during phase (1)). Thus generated X-ray poses are similar to those used during the training of N. Validation is carried out with 10% of randomly selected poses.

**阶段2.c-特定病人的重新训练**：由于特征点M和M'并不一定描述的是同样的真实世界点，所以需要进行网络重训练。生成网络N'以检测提炼的特征点M'。N'的权重用N的权重进行初始化。为进行特定患者的重训练，合成的DRR X射线图像只用CTpat生成（与阶段1中使用的13个病人的集合相比较）。因此，生成的X射线图像姿态与训练N时用到的类似。验证是用随机选择的10%的姿态进行的。

**Phase 3—Intraoperative Registration**: Here, the transformation matrix T is computed, to define the rough initial 6DoF alignment of any new X-ray image, as an input for a given registration method R. An unknown X-ray pose (i.e. previously unseen during phases 1-2) is generated from CTpat. First, the network N' is applied to fully-automatically infer the landmarks M' on the X-ray image. Then, T is computed via a Perspective-n-Point scheme [4], using the detected X-ray landmarks together with the corresponding CTpat landmarks determined in phase 2. Finally, this rough initialization T is exploited by a fine registration R to accurately match the X-ray to CTpat, as detailed in Sect.3.

**阶段3-术中配准**：这里，计算变形矩阵T，以对任意新的X射线图像定义其大致的初始6DoF对齐，作为给定配准方法R的输入。从CTpat中生成一个未知的X射线姿态（即，在阶段1-2上以前未曾见过的）。第一，应用网络N'，以在X射线图像中全自动的推理特征点M'。然后，T通过一个PnP方案进行计算[1]，使用的是检测到的X射线图像特征点与在阶段2中确定的对应的CTpat特征点。最后，利用这个大致的初始化T，进行精细的配准R，以准确的将X射线图像与CTpat进行准确的配准，我们在第3部分进行详述。

## 3. Experiments and Results

**Evaluating the Initialization T(I1)**: The accuracy of the initialization method was evaluated with DRR X-ray images. Pre-training (phase 1) was applied on 13 patient CTs (i.e. the training set). Landmark refinement (phase 2) was performed individually on 6 new CTs, each from a different and previously unseen patient (referred to as the “test set”). Patient-specific re-training was carried out for 4 epochs. Initial transformation (T, phase 3) was computed for 81 X-ray poses per CT (Fig. 3a). Ground-truth poses (gt) were evenly sampled using 9 samples for the rotation around the z axis (range: ±40◦) and 3 samples for both translation along z (range: top to bottom of the pelvis) and rotation around y (range: ±15◦). Special care was taken so that these poses were previously unseen during pre-training or validation. First, the Target Registration Error (TRE) was assessed by computing the pairwise distance between landmarks resulting from T and gt. A fair evaluation was conducted by using the set M, since these points are different from those used for training and pose estimation (i.e. M'). Then, the C-Arm pose was investigated by comparing the camera centers resulting from T and gt (Fig. 3b). The translational error was computed via the Euclidean distance between the two camera centers, measured in CTpat coordinate space. The rotational error was computed as the absolute angle of the axis-angle representation of $R_T R_{gt}^T$.

**评估初始化T(I1)**：用DRR X射线图像来评估初始化方法的准确率。在13位患者的CTs（即，训练集）上应用了预训练（阶段1）。特征点提炼（阶段2）在6个新的CT上分别单独进行，每个都是之前未见过的不同的患者（称为测试集）。特定患者的重训练进行4轮。初始变换（T，阶段3）对每个CT计算81个X射线图像姿态（图3a）。真值姿态(gt)是均匀采样得到的，沿z轴旋转的9个样本（范围：±40◦），对沿着z轴的平移（范围：从盆部的顶部到底部）和沿着y轴的旋转（范围：±15◦）都是3个采样。要使这些姿态在之前的预训练或验证中未曾见到，需要进行特殊的工作。第一，TRE通过计算T得到的特征点与gt之间的成对距离得到。使用集合M进行了公平的评估，因为这些点与用于训练和姿态估计（即，M'）的点不同。然后，C形臂的姿态通过比较从T得到的相机中心和gt得到（图3b）。平移误差是通过两个相机中心的欧式距离得到，在CTpat坐标系空间中进行的度量。旋转误差计算为，$R_T R_{gt}^T$的轴角度表示的绝对角度。

**Evaluating the Subsequent Registration R(T(I1), I2)**: The applicability of the proposed initialization method T was investigated by determining whether the resulting error was within the capture range of a registration method R. An intensity-based registration algorithm using the widely established BOBYQA optimizer was applied to the initialized poses T(I1) on the entire test set. Both normalized cross-correlation (NCC) and local normalized cross-correlation (LNCC) similarity metrics were independently assessed. The registration error was computed as the average pairwise projection distance between the landmark set M resulting from R and gt. Registration success was empirically defined as a mean projection distance smaller than 2.5% of the detector width (i.e. <9.7 mm).

**评估后续的配准R(T(I1), I2)**：对提出的初始化方法T的应用性的研究，是看得到的误差是否在配准方法R的捕获范围内。一种基于灰度的配准算法，使用的是BOBYQA优化器，在整个测试集中应用于初始化的姿态T(I1)。对归一化互相关(NCC)和局部归一化互相关(LNCC)两种相似性度量都独立进行了评估。配准误差计算为，R得到的特征点集M和gt的平均成对投影距离。我们通过经验，将配准成功定义为平均投影距离小雨2.5%的探测器宽度（即，<9.7 mm）。

**Imaging Parameters**: For the X-ray C-Arm geometry: 1200mm source-to-detector distance; 700 mm source iso-center; 384 × 300 mm2 detector size; and 1.6 mm2 isotropic pixel size. For the CT: 0.82 mm3 isotropic voxel size.

**成像参数**：对于X射线成像的C形臂几何：1200mm的源板距，源到等中心距离为700mm；384 × 300 mm2探测器大小；1.6 mm2 等中心像素大小。对于CT：0.82 mm3 等中心体素大小。

**Results**: The results of the evaluation of the initialization T(I1) are detailed in Fig.4. The average (± STD) TRE over all patients and all poses was 15.0 ± 7.3 mm (Fig. 3—no substantial difference was found between patients). As for the results of the final registration R(T(I1), I2), the registration algorithm was successful on 472/486 and 450/486 cases with the NCC and LNCC metrics, respectively (Fig.5). In successful operations, the average (± STD) projection distance error was 3.4 ± 2.3 mm and 2.2 ± 1.6 mm for NCC and LNCC, respectively. The execution time on a workstation (Core i7 9700K, 8 GB RAM, Nvidia Titan XP) was 102 ms for the intra-operative initialization (Fig. 1, phase 3) and 40min per CT for the offline DRR generation required for patient-specific re-training (phase 2.c).

**结果**：初始化T(I1)的评估结果如图4所示。在所有患者所有姿态上的平均(± STD) TRE为15.0 ± 7.3 mm（图3，不同患者之间并没有发现非常不同的差异）。至于最终的配准结果R(T(I1), I2)，配准算法在NCC和LNCC度量上的成功率为472/486和450/486（图5）。在成功的操作中，平均(± STD)投影距离误差，对于NCC和LNCC分别为3.4 ± 2.3 mm和2.2 ± 1.6 mm。在一个工作站上的执行时间，术中初始化为102ms（图1，阶段3），而用于特定患者重新训练的离线DRR生成时间为每位患者CT为40min。

## 4. Discussion and Conclusion

A framework was introduced to enable X-ray to CT registration without any user interaction required. The focus of this study is a patient-specific initialization scheme that can be coupled to standard intensity-based registration methods. The fully-automatic nature of the framework—combined with a runtime compatible with live intraoperative imaging, and a robustness against a wide variety of poses and patients—are strong assets for its integration into the surgical workflow. Although the present work is evaluated on artificial DRR X-rays, clinical applicability still holds, as the underlying architecture of the network N can generalize from synthetic to real X-rays [1]. The method was evaluated for the human pelvis, however no major challenge is foreseen for extending it to any other rigid anatomy. Further performance improvement is likely to be achieved by weighting the landmarks during pose estimation, based on the validation error of each individual landmark m'ω during the patient specific re-training (phase 2). Concluding, the proposed approach paves the road towards a new end-to-end paradigm for fully-automatic X-ray to CT registration in the operating room.

提出了一种框架，用于不需要用户交互的X射线图像到CT配准。本研究的焦点是一种特定患者的初始化方案，可以与标准的基于灰度的配准方法配合使用。本框架是全自动的，其运行时间与现场术中成像是兼容的，对于各种姿态都是稳健的，这对于整合进手术工作流中都是很强的。虽然目前的工作是在仿真的DRR X射线图像上进行的，临床的可用性仍然是有的，因为所用的网络N的架构可以从合成图像泛化到真实X射线图像[1]。这种方法在人类盆骨上进行了评估，但拓展到其他刚性解剖结构中，并不存在很大的挑战。进一步的性能改进，可以在姿态估计中对各个特征点进行加权，基于在特定患者重新训练（阶段2）中的每个独立特征点m'ω的验证误差。结论是，提出的方法为一种新的手术室中的端到端的全自动X射线图像到CT图像的自动配准铺平了道路。